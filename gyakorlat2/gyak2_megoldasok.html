<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 1. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><span>#include</span> <span>&lt;stdlib.h&gt;</span><br /><br /><span>int</span> <span>first_greater_than_15</span><span>(</span><span>int</span> <span>*</span><span>array</span><span>, </span><span>int</span> <span>length</span><span>) {</span><br /><span>   for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>; </span><span>i</span> <span>&lt;</span> <span>length</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>      if</span><span> (</span><span>array</span><span>[</span><span>i</span><span>] </span><span>&gt;</span> <span>15</span><span>) {</span><br /><span>         return</span> <span>array</span><span>[</span><span>i</span><span>];</span><br /><span>      }</span><br /><span>   }</span><br /><br /><span>   return</span> <span>-</span><span>1</span><span>;</span><br /><span>}</span><br /><br /><span>int</span> <span>main</span><span>() {</span><br /><span>   int</span> <span>n</span><span>;</span><br /><span>   printf</span><span>(</span><span>"Add the length of the array: "</span><span>);</span><br /><span>   <br />   scanf</span><span>(</span><span>"</span><span>%d</span><span>"</span><span>, </span><span>&amp;</span><span>n</span><span>);</span><br /><br /><span>   int</span> <span>*</span><span>array</span> <span>=</span> <span>malloc</span><span>(</span><span>n</span> <span>*</span> <span>sizeof</span><span>(</span><span>int</span><span>));</span><br /><span>   if</span><span> (</span><span>array</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Memory allocation error!</span><span>\n</span><span>"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>; </span><span>i</span> <span>&lt;</span> <span>n</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>      int</span> <span>value</span><span>;</span><br /><span>      do</span><span> {</span><br /><span>         printf</span><span>(</span><span>"Add the </span><span>%d</span><span>. element (1-20): "</span><span>, </span><span>i</span> <span>+</span> <span>1</span><span>);</span><br /><span>         scanf</span><span>(</span><span>"</span><span>%d</span><span>"</span><span>, </span><span>&amp;</span><span>value</span><span>);</span><br /><br /><span>      } </span><span>while</span><span> (</span><span>value</span> <span>&lt;</span> <span>1</span> <span>||</span> <span>value</span> <span>&gt;</span> <span>20</span><span>);</span><br /><br /><span>      array</span><span>[</span><span>i</span><span>] </span><span>=</span> <span>value</span><span>;</span><br /><span>   }</span><br /><br /><span>   int</span> <span>result</span> <span>=</span> <span>first_greater_than_15</span><span>(</span><span>array</span><span>, </span><span>n</span><span>);</span><br /><span>   if</span><span> (</span><span>result</span> <span>!=</span> <span>-</span><span>1</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"First number &gt; 15: </span><span>%d</span><span>\n</span><span>"</span><span>, </span><span>result</span><span>);</span><br /><span>   } </span><span>else</span><span> {</span><br /><span>      printf</span><span>(</span><span>"No number greater than 15.</span><span>\n</span><span>"</span><span>);</span><br /><span>   }</span><br /><br /><span>   free</span><span>(</span><span>array</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 2. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><span>#include</span> <span>&lt;stdlib.h&gt;</span><br /><br /><span>int</span> <span>first_greater_than_15</span><span>(</span><span>int</span> <span>*</span><span>array</span><span>, </span><span>int</span> <span>length</span><span>) {</span><br />   <span>for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>; </span><span>i</span> <span>&lt;</span> <span>length</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>      if</span><span> (</span><span>array</span><span>[</span><span>i</span><span>] </span><span>&gt;</span> <span>15</span><span>) {</span><br /><span>         return</span> <span>array</span><span>[</span><span>i</span><span>];</span><br /><span>      }</span><br /><span>   }</span><br /><br /><span>   return</span> <span>-</span><span>1</span><span>;</span><br /><span>}</span><br /><br /><span>int</span> <span>main</span><span>() {</span><br /><span>   int</span> <span>n</span><span>, </span><span>m</span><span>;</span><br /><span>   printf</span><span>(</span><span>"Add the original length of the array: "</span><span>);</span><br /><br /><span>   scanf</span><span>(</span><span>"</span><span>%d</span><span>"</span><span>, </span><span>&amp;</span><span>n</span><span>);</span><br /><br /><span>   int</span> <span>*</span><span>array</span> <span>=</span> <span>malloc</span><span>(</span><span>n</span> <span>*</span> <span>sizeof</span><span>(</span><span>int</span><span>));</span><br /><span>   if</span><span> (</span><span>array</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Memory allocation error!</span><span>\n</span><span>"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>; </span><span>i</span> <span>&lt;</span> <span>n</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>      int</span> <span>value</span><span>;</span><br /><span>      do</span><span> {</span><br /><span>         printf</span><span>(</span><span>"Add the </span><span>%d</span><span>. element (1-20): "</span><span>, </span><span>i</span> <span>+</span> <span>1</span><span>);</span><br /><span>         scanf</span><span>(</span><span>"</span><span>%d</span><span>"</span><span>, </span><span>&amp;</span><span>value</span><span>);</span><br /><span>      } </span><span>while</span><span> (</span><span>value</span> <span>&lt;</span> <span>1</span> <span>||</span> <span>value</span> <span>&gt;</span> <span>20</span><span>);</span><br /><br /><span>      array</span><span>[</span><span>i</span><span>] </span><span>=</span> <span>value</span><span>;</span><br /><span>   }</span><br /><br /><span>   printf</span><span>(</span><span>"Add the new size of the array (m): "</span><span>);</span><br /><span>   scanf</span><span>(</span><span>"</span><span>%d</span><span>"</span><span>, </span><span>&amp;</span><span>m</span><span>);</span><br /><br /><span>   int</span> <span>*</span><span>temp</span> <span>=</span> <span>realloc</span><span>(</span><span>array</span><span>, </span><span>m</span> <span>*</span> <span>sizeof</span><span>(</span><span>int</span><span>));</span><br /><span>   if</span><span> (</span><span>temp</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Memory reallocation error!</span><span>\n</span><span>"</span><span>);</span><br /><span>      free</span><span>(</span><span>array</span><span>);<br /></span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   array</span> <span>=</span> <span>temp</span><span>;<br /></span><br /><span>   if</span><span> (</span><span>m</span> <span>&gt;</span> <span>n</span><span>) {</span><br /><span>      for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>n</span><span>; </span><span>i</span> <span>&lt;</span> <span>m</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>         array</span><span>[</span><span>i</span><span>] </span><span>=</span> <span>-</span><span>1</span><span>;</span><br /><span>      }</span><br /><span>   }</span><br /><br /><span>   int</span> <span>result</span> <span>=</span> <span>first_greater_than_15</span><span>(</span><span>array</span><span>, </span><span>m</span><span>);</span><br /><span>   if</span><span> (</span><span>result</span> <span>!=</span> <span>-</span><span>1</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"First number &gt; 15: </span><span>%d</span><span>\n</span><span>"</span><span>, </span><span>result</span><span>);</span><br /><span>   } </span><span>else</span><span> {</span><br /><span>      printf</span><span>(</span><span>"No number greater than 15.</span><span>\n</span><span>"</span><span>);</span><br /><span>   }</span><br /><br /><span>   printf</span><span>(</span><span>"Array elements:</span><span>\n</span><span>"</span><span>);</span><br /><span>   for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>; </span><span>i</span> <span>&lt;</span> <span>m</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"</span><span>%d</span><span> "</span><span>, </span><span>array</span><span>[</span><span>i</span><span>]);</span><br /><span>   }</span><br /><br /><span>   printf</span><span>(</span><span>"</span><span>\n</span><span>"</span><span>);</span><br /><span>   free</span><span>(</span><span>array</span><span>);<br /></span><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; color: #000000; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 3. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><span>#include</span> <span>&lt;stdlib.h&gt;</span><br /><span>#include</span> <span>&lt;time.h&gt;</span><br /><br /><span>int</span> <span>main</span><span>() {</span><br /><span>   time_t</span> <span>time_start</span> <span>=</span> <span>time</span><span>(</span><span>NULL</span><span>);</span><br /><br /><span>   int</span><span>*</span> <span>array</span> <span>=</span><span> (</span><span>int</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>10</span> <span>*</span> <span>sizeof</span><span>(</span><span>int</span><span>));</span><br /><span>   printf</span><span>(</span><span>"Dinamically allocated array of numbers:</span><span>\n</span><span>"</span><span>);</span><br /><br /><span>   srand</span><span>(</span><span>time_start</span><span>);</span><br /><br /><span>   for</span><span> (</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>; </span><span>i</span> <span>&lt;</span> <span>10</span><span>; </span><span>i</span><span>++</span><span>) {</span><br /><span>      array</span><span>[</span><span>i</span><span>] </span><span>=</span> <span>rand</span><span>() </span><span>%</span> <span>100</span><span>;</span><br /><span>      printf</span><span>(</span><span>"</span><span>%d</span><span> "</span><span>, </span><span>array</span><span>[</span><span>i</span><span>]);</span><br /><span>   }</span><br /><br /><span>   free</span><span>(</span><span>array</span><span>);</span><br /><br /><span>   time_t</span> <span>time_end</span> <span>=</span> <span>time</span><span>(</span><span>NULL</span><span>);</span><br /><span>   double</span> <span>elapsed</span> <span>=</span> <span>difftime</span><span>(</span><span>time_end</span><span>, </span><span>time_start</span><span>);</span><br /><span>   printf</span><span>(</span><span>"</span><span>\n</span><span>Elapsed time between starting and ending the program: </span><span>%.5f</span><span> seconds</span><span>\n</span><span>"</span><span>, </span><span>elapsed</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 4. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><span>#include</span> <span>&lt;time.h&gt;</span><br /><br /><span>int</span> <span>main</span><span>() {</span><br /><span>   time_t</span> <span>now</span> <span>=</span> <span>time</span><span>(</span><span>NULL</span><span>);</span><br /><span>   struct</span> <span>tm</span> <span>*</span><span>timeinfo</span> <span>=</span> <span>localtime</span><span>(</span><span>&amp;</span><span>now</span><span>);</span><br /><br /><span>   FILE</span> <span>*</span><span>file</span> <span>=</span> <span>fopen</span><span>(</span><span>"time_storage.txt"</span><span>, </span><span>"w"</span><span>);</span><br /><br /><span>   int</span> <span>year</span> <span>=</span> <span>timeinfo</span><span>-&gt;</span><span>tm_year</span> <span>+</span> <span>1900</span><span>;</span><br /><span>   int</span> <span>month</span> <span>=</span> <span>timeinfo</span><span>-&gt;</span><span>tm_mon</span> <span>+</span> <span>1</span><span>;</span><br /><span>   int</span> <span>day</span> <span>=</span> <span>timeinfo</span><span>-&gt;</span><span>tm_mday</span><span>;</span><br /><br /><span>   int</span> <span>hour</span> <span>=</span> <span>timeinfo</span><span>-&gt;</span><span>tm_hour</span><span>;</span><br /><span>   int</span> <span>minute</span> <span>=</span> <span>timeinfo</span><span>-&gt;</span><span>tm_min</span><span>;</span><br /><span>   int</span> <span>second</span> <span>=</span> <span>timeinfo</span><span>-&gt;</span><span>tm_sec</span><span>;</span><br /><br /><span>   fprintf</span><span>(</span><span>file</span><span>, </span><span>"Current local time and date: </span><span>%04d</span><span>-</span><span>%02d</span><span>-</span><span>%02d</span> <span>%02d</span><span>:</span><span>%02d</span><span>:</span><span>%02d</span><span>\n</span><span>"</span><span>, </span><br /><span>   year</span><span>, </span><span>month</span><span>, </span><span>day</span><span>, </span><span>hour</span><span>, </span><span>minute</span><span>, </span><span>second</span><span>); </span><br /><br /><span>   fclose</span><span>(</span><span>file</span><span>);</span><br /><br /><span>   printf</span><span>(</span><span>"Successfully wrote the current time and date to time_storage.txt</span><span>\n</span><span>"</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 5. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><br /><span>int</span> <span>main</span><span>(</span><span>int</span> <span>argc</span><span>, </span><span>char</span><span>*</span> <span>argv</span><span>[]</span><span>) {</span><br /><span>   if</span><span> (</span><span>argc</span> <span>!=</span> <span>2</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Please add an existing filename as a command line argument.</span><span>\n</span><span>"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   const</span> <span>char</span> <span>*</span><span>filename</span> <span>=</span> <span>argv</span><span>[</span><span>1</span><span>];</span><br /><br /><span>   FILE</span><span>*</span> <span>file</span> <span>=</span> <span>fopen</span><span>(</span><span>filename</span><span>, </span><span>"r"</span><span>);</span><br /><span>   if</span><span> (</span><span>file</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      perror</span><span>(</span><span>"Error opening file: file not found"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   int</span> <span>character</span><span>;</span><br /><span>   int</span> <span>line_count</span> <span>=</span> <span>0</span><span>;</span><br /><span>   int</span> <span>char_count</span> <span>=</span> <span>0</span><span>;</span><br /><br /><span>   while</span><span> ((</span><span>character</span> <span>=</span> <span>fgetc</span><span>(</span><span>file</span><span>)) </span><span>!=</span> <span>EOF</span><span>) {</span><br /><span>      char_count</span><span>++</span><span>;<br /></span><br /><span>      if</span><span> (</span><span>character</span> <span>==</span> <span>'</span><span>\n</span><span>'</span><span>) {</span><br /><span>         line_count</span><span>++</span><span>;</span><br /><span>      }</span><br /><span>   }</span><br /><br /><span>   fclose</span><span>(</span><span>file</span><span>);</span><br /><br /><span>   printf</span><span>(</span><span>"Number of lines: </span><span>%d</span><span>\n</span><span>"</span><span>, </span><span>line_count</span><span>);</span><br /><span>   printf</span><span>(</span><span>"Number of characters: </span><span>%d</span><span>\n</span><span>"</span><span>, </span><span>char_count</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 6. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><br /><span>int</span> <span>main</span><span>() {</span><br /><span>   FILE</span><span>*</span> <span>file</span> <span>=</span> <span>fopen</span><span>(</span><span>"structured_data.txt"</span><span>, </span><span>"r"</span><span>);</span><br /><span>   if</span><span> (</span><span>file</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Error opening file: file not found.</span><span>\n</span><span>"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   char</span> <span>name</span><span>[</span><span>50</span><span>], </span><span>city</span><span>[</span><span>50</span><span>];</span><br /><span>   int</span> <span>age</span><span>;</span><br /><br /><span>   fscanf</span><span>(</span><span>file</span><span>, </span><span>"</span><span>%*s</span> <span>%*s</span> <span>%*s</span><span>"</span><span>);</span><span> // skip header line</span><br /><span>   <br />   while</span><span> (</span><span>fscanf</span><span>(</span><span>file</span><span>, </span><span>"</span><span>%49s</span> <span>%d</span> <span>%49s</span><span>"</span><span>, </span><span>name</span><span>, </span><span>&amp;</span><span>age</span><span>, </span><span>city</span><span>) </span><span>==</span> <span>3</span><span>) {</span><br /><span>      if</span><span> (</span><span>age</span> <span>&gt;=</span> <span>20</span> <span>&amp;&amp;</span> <span>age</span> <span>&lt;=</span> <span>30</span><span>) {</span><br /><span>         printf</span><span>(</span><span>"Name: </span><span>%s</span><span>, city: </span><span>%s</span><span>\n</span><span>"</span><span>, </span><span>name</span><span>, </span><span>city</span><span>);</span><br /><span>      }</span><br /><span>   }</span><br /><br /><span>   fclose</span><span>(</span><span>file</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 7. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><br /><span>int</span> <span>main</span><span>(</span><span>int</span> <span>argc</span><span>, </span><span>char</span><span>*</span> <span>argv</span><span>[]</span><span>) {</span><br /><span>   if</span><span> (</span><span>argc</span> <span>!=</span> <span>3</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Copy program. Needs a source and a destination file name as arguments.</span><span>\n</span><span>"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   FILE</span> <span>*</span><span>sourceFile</span> <span>=</span> <span>fopen</span><span>(</span><span>argv</span><span>[</span><span>1</span><span>], </span><span>"r"</span><span>);</span><br /><span>   FILE</span> <span>*</span><span>destinationFile</span> <span>=</span> <span>fopen</span><span>(</span><span>argv</span><span>[</span><span>2</span><span>], </span><span>"w"</span><span>);</span><br /><br /><span>   if</span><span> (</span><span>sourceFile</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      perror</span><span>(</span><span>"Error opening file: file not found"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   int</span> <span>character</span><span>;</span><br /><span>   int</span> <span>lineNumber</span> <span>=</span> <span>1</span><span>;</span><span> // index of current line</span><br /><br /><span>   while</span><span> ((</span><span>character</span> <span>=</span> <span>fgetc</span><span>(</span><span>sourceFile</span><span>)) </span><span>!=</span> <span>EOF</span><span>) {</span><br /><span>      if</span><span> (</span><span>lineNumber</span> <span>%</span> <span>2</span> <span>==</span> <span>0</span><span>) {</span><span> // if current line is even</span><br /><span>         fputc</span><span>(</span><span>character</span><span>, </span><span>destinationFile</span><span>);</span><br /><span>      }</span><br /><br /><span>      if</span><span> (</span><span>character</span> <span>==</span> <span>'</span><span>\n</span><span>'</span><span>) {</span><br /><span>         lineNumber</span><span>++</span><span>;</span><br /><span>      }</span><br /><span>   }</span><br /><br /><span>   fclose</span><span>(</span><span>sourceFile</span><span>);</span><br /><span>   fclose</span><span>(</span><span>destinationFile</span><span>);</span><br /><br /><span>   printf</span><span>(</span><span>"Copying completed successfully.</span><span>\n</span><span>"</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="text-decoration: underline; background-color: #c2e0f4;"><strong><span style="font-size: 14pt; background-color: #c2e0f4;">&Oacute;rai 8. feladat megold&aacute;sa:</span></strong></span></p>
<div>
<pre><span>#include</span> <span>&lt;stdio.h&gt;</span><br /><span>#include</span> <span>&lt;string.h&gt;</span><br /><span>#include</span> <span>&lt;dirent.h&gt;</span><br /><span>#include</span> <span>&lt;sys/stat.h&gt;</span><br /><br /><span>int</span> <span>main</span><span>(</span><span>int</span> <span>argc</span><span>, </span><span>char</span><span>*</span> <span>argv</span><span>[]</span><span>) {</span><br /><span>   if</span><span> (</span><span>argc</span> <span>!=</span> <span>2</span><span>) {</span><br /><span>      printf</span><span>(</span><span>"Add a directory name as an argument.</span><span>\n</span><span>"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   DIR</span><span>*</span> <span>directory</span> <span>=</span> <span>opendir</span><span>(</span><span>argv</span><span>[</span><span>1</span><span>]);</span><br /><span>   if</span><span> (</span><span>directory</span> <span>==</span> <span>NULL</span><span>) {</span><br /><span>      perror</span><span>(</span><span>"Error opening directory"</span><span>);</span><br /><span>      return</span> <span>1</span><span>;</span><br /><span>   }</span><br /><br /><span>   struct</span> <span>dirent</span><span>*</span> <span>entry</span><span>;</span><br /><span>   struct</span> <span>stat</span> <span>fileStat</span><span>;</span><br /><span>   char</span> <span>filePath</span><span>[</span><span>1024</span><span>];</span><br /><br /><span>   while</span><span> ((</span><span>entry</span> <span>=</span> <span>readdir</span><span>(</span><span>directory</span><span>)) </span><span>!=</span> <span>NULL</span><span>) {</span><br /><span>      // skip "." and ".." entries (parent directories)</span><br /><span>      if</span><span> (</span><span>strcmp</span><span>(</span><span>entry</span><span>-&gt;</span><span>d_name</span><span>, </span><span>"."</span><span>) </span><span>==</span> <span>0</span> <span>||</span> <span>strcmp</span><span>(</span><span>entry</span><span>-&gt;</span><span>d_name</span><span>, </span><span>".."</span><span>) </span><span>==</span> <span>0</span><span>) {</span><br /><span>         continue</span><span>;</span><br /><span>      }</span><br /><br /><span>      // create the full file path</span><br /><span>      snprintf</span><span>(</span><span>filePath</span><span>, </span><span>sizeof</span><span>(</span><span>filePath</span><span>), </span><span>"</span><span>%s</span><span>/</span><span>%s</span><span>"</span><span>, </span><span>argv</span><span>[</span><span>1</span><span>], </span><span>entry</span><span>-&gt;</span><span>d_name</span><span>);</span><br /><br /><span>      // get file statistics</span><br /><span>      if</span><span> (</span><span>stat</span><span>(</span><span>filePath</span><span>, </span><span>&amp;</span><span>fileStat</span><span>) </span><span>==</span> <span>-</span><span>1</span><span>) {</span><br /><span>         perror</span><span>(</span><span>"Error: file statistics are not accessible"</span><span>);</span><br /><span>         continue</span><span>;</span><br /><span>      }</span><br /><br /><span>      // get the type of the file</span><br /><span>      if</span><span> (</span><span>S_ISDIR</span><span>(</span><span>fileStat</span><span>.</span><span>st_mode</span><span>)) {</span><br /><span>         printf</span><span>(</span><span>"[DIR] "</span><span>);</span><br /><span>      } </span><span>else</span> <span>if</span><span> (</span><span>S_ISLNK</span><span>(</span><span>fileStat</span><span>.</span><span>st_mode</span><span>)) {</span><br /><span>         printf</span><span>(</span><span>"[LINK] "</span><span>);</span><br /><span>      } </span><span>else</span><span> {</span><br /><span>         printf</span><span>(</span><span>"[FILE] "</span><span>);</span><br /><span>      }</span><br /><br /><span>      printf</span><span>(</span><span>"</span><span>%s</span><span> | "</span><span>, </span><span>entry</span><span>-&gt;</span><span>d_name</span><span>);</span><br /><span>      printf</span><span>(</span><span>"size: </span><span>%lld</span><span> bytes | "</span><span>, </span><span>fileStat</span><span>.</span><span>st_size</span><span>);</span><br /><span>      printf</span><span>(</span><span>"inode: </span><span>%llu</span><span> | "</span><span>, </span><span>fileStat</span><span>.</span><span>st_ino</span><span>);</span><br /><br /><span>      printf</span><span>(</span><span>"permissions: "</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IRUSR</span><span>) </span><span>?</span> <span>"r"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IWUSR</span><span>) </span><span>?</span> <span>"w"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IXUSR</span><span>) </span><span>?</span> <span>"x"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IRGRP</span><span>) </span><span>?</span> <span>"r"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IWGRP</span><span>) </span><span>?</span> <span>"w"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IXGRP</span><span>) </span><span>?</span> <span>"x"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IROTH</span><span>) </span><span>?</span> <span>"r"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IWOTH</span><span>) </span><span>?</span> <span>"w"</span> <span>:</span> <span>"-"</span><span>);</span><br /><span>      printf</span><span>((</span><span>fileStat</span><span>.</span><span>st_mode</span> <span>&amp;</span> <span>S_IXOTH</span><span>) </span><span>?</span> <span>"x"</span> <span>:</span> <span>"-"</span><span>);</span><br /><br /><span>      printf</span><span>(</span><span>"</span><span>\n</span><span>"</span><span>);</span><br /><span>   }</span><br /><br /><span>   closedir</span><span>(</span><span>directory</span><span>);</span><br /><br /><span>   return</span> <span>0</span><span>;</span><br /><span>}</span></pre>
</div>